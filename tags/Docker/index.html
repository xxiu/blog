<!DOCTYPE html>
<html  lang="zh">
<head>
    <meta charset="utf-8">
<title>标签: docker - 张巍的烂笔头</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />



    <meta name="description" content="记录&amp;发现">
<meta property="og:type" content="website">
<meta property="og:title" content="张巍的烂笔头">
<meta property="og:url" content="https://beixiu.net/tags/docker/index.html">
<meta property="og:site_name" content="张巍的烂笔头">
<meta property="og:description" content="记录&amp;发现">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="张巍的烂笔头">
<meta name="twitter:description" content="记录&amp;发现">





<link rel="icon" href="/images/favicon.icon">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.7.2/css/bulma.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css">


    
    
    
    <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>
    

    
    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css">
    

    
    

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.css">


    
    
    
    

<link rel="stylesheet" href="/css/back-to-top.css">


    
    

    
    
    
    

    
    
<link rel="stylesheet" href="/css/progressbar.css">
<script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>

    
    
    

    


<link rel="stylesheet" href="/css/style.css">
</head>
<body class="is-3-column">
    <nav class="navbar navbar-main">
    <div class="container">
        <div class="navbar-brand is-flex-center">
            <a class="navbar-item navbar-logo" href="/">
            
                <img src="/images/avatar.png" alt="张巍的烂笔头" height="28">
            
            </a>
        </div>
        <div class="navbar-menu">
            
            <div class="navbar-start">
                
                <a class="navbar-item"
                href="/">首页</a>
                
                <a class="navbar-item"
                href="/archives">归档</a>
                
                <a class="navbar-item"
                href="/categories">分类</a>
                
                <a class="navbar-item"
                href="/tags">标签</a>
                
                <a class="navbar-item"
                href="/about">关于</a>
                
            </div>
            
            <div class="navbar-end">
                
                    
                    
                    <a class="navbar-item" target="_blank" title="Download on GitHub" href="http://github.com/xxiu">
                        
                        <i class="fab fa-github"></i>
                        
                    </a>
                    
                
                
                
                <a class="navbar-item search" title="搜索" href="javascript:;">
                    <i class="fas fa-search"></i>
                </a>
                
            </div>
        </div>
    </div>
</nav>
    
    <section class="section">
        <div class="container">
            <div class="columns">
                <div class="column is-8-tablet is-8-desktop is-6-widescreen has-order-2 column-main"><div class="card">
    <div class="card-content">
        <nav class="breadcrumb" aria-label="breadcrumbs">
        <ul>
            <li><a href="/tags">标签</a></li>
            <li class="is-active"><a href="#" aria-current="page">docker</a></li>
        </ul>
        </nav>
    </div>
</div>

    <div class="card">
    
    <div class="card-image">
        <a href="/dev/docker-sysctl/" class="image is-7by1">
            <img class="thumbnail" src="/static/default.jpg" alt="docker_sysctl">
        </a>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-12-12T02:54:47.000Z">2019-12-12</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/./dev/">dev</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    5 分钟 读完 (大约 746 个字)
                </span>
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/dev/docker-sysctl/">docker_sysctl</a>
            
        </h1>
        <div class="content">
            <p>Sysctl 用于配置运行时的内核参数，正常情况下修改 <code>/etc/sysctl.conf</code> . 然后执行 <code>sysctl -p</code> 就能够设置成功。 </p>
<p>当使用 Docker 启动服务时，使用 sysctl -p 来配置 docker 的参数时会出现问题。比如</p>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sysctl: cannot stat /proc/sys/net/core/rmem_max: No such file or directory</span><br><span class="line">sysctl: cannot stat /proc/sys/net/core/wmem_max: No such file or directory</span><br></pre></td></tr></table></figure>
<p>由于是配置的内核参数，如果容器修改了内核的参数，还是需要宿主机支持才行，直接修改是不支持的。 Docker的base image做的很精简，甚至都没有init进程，原本在OS启动时执行生效系统变量的过程(sysctl -p)也给省略了，导致这些系统变量依旧保留着kernel默认值。</p>
<p>在 Docker 中对 sysctl 做了一些支持。 但是也只是有限的支持。在 Docker 启动容器时，指定 –sysctl 参数可以设置 sysctl 的参数 。 在 docker-compose.yml 文件中也提供了 <a href="https://docs.docker.com/compose/compose-file/#sysctls" target="_blank" rel="noopener">sysctls</a> 的参数 。 </p>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sysctls:</span><br><span class="line">  - net.core.somaxconn=1024</span><br><span class="line">  - net.ipv4.tcp_syncookies=0</span><br></pre></td></tr></table></figure>
<p>但是，Docker 中 sysctl 的可调参数要比宿主机少得多。 </p>
<ol>
<li><p>未被 docker 限制的参数</p>
<p>Docker通过一个 ValidateSysctl函数来限制 sysctl参数可以传入的项。</p>
<figure class="highlight go hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment">// docker/opts/opts.go</span></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">ValidateSysctl</span><span class="hljs-params">(val <span class="hljs-keyword">string</span>)</span> <span class="hljs-params">(<span class="hljs-keyword">string</span>, error)</span></span> &#123;    </span><br><span class="line">  validSysctlMap := <span class="hljs-keyword">map</span>[<span class="hljs-keyword">string</span>]<span class="hljs-keyword">bool</span>&#123;        </span><br><span class="line">    <span class="hljs-string">"kernel.msgmax"</span>:          <span class="hljs-literal">true</span>,        </span><br><span class="line">    <span class="hljs-string">"kernel.msgmnb"</span>:          <span class="hljs-literal">true</span>,        </span><br><span class="line">    <span class="hljs-string">"kernel.msgmni"</span>:          <span class="hljs-literal">true</span>,       </span><br><span class="line">    <span class="hljs-string">"kernel.sem"</span>:             <span class="hljs-literal">true</span>,       </span><br><span class="line">    <span class="hljs-string">"kernel.shmall"</span>:          <span class="hljs-literal">true</span>,       </span><br><span class="line">    <span class="hljs-string">"kernel.shmmax"</span>:          <span class="hljs-literal">true</span>,        </span><br><span class="line">    <span class="hljs-string">"kernel.shmmni"</span>:          <span class="hljs-literal">true</span>,       </span><br><span class="line">    <span class="hljs-string">"kernel.shm_rmid_forced"</span>: <span class="hljs-literal">true</span>,   </span><br><span class="line"> &#125;     </span><br><span class="line">  validSysctlPrefixes := []<span class="hljs-keyword">string</span>&#123; </span><br><span class="line">       <span class="hljs-string">"net."</span>,</span><br><span class="line">       <span class="hljs-string">"fs.mqueue."</span>,   </span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>容器中可以看见该配置项 </p>
<p>可以使用  sysctl -a 看到 </p>
</li>
<li><p>配置项可以 namespace 化</p>
<p>配置项无法 namespace化，指的是该配置项是全局的，无法为每个 namespace生成独立的配置。</p>
<p>一般来说，宿主机和容器是一对多的关系，一个无法 namespace化的配置项，调整之后会影响所有其他容器以及宿主机本身，这是我们无法接受的。</p>
</li>
</ol>
<p>以上内容参考<a href="https://segmentfault.com/a/1190000009225126" target="_blank" rel="noopener">https://segmentfault.com/a/1190000009225126</a></p>
<ol>
<li>在设置 socket 的一些网络参数时 。对内核参数进行修改</li>
</ol>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">net.core.wmem_max=12582912</span><br><span class="line">net.core.rmem_max=12582912</span><br><span class="line">net.ipv4.tcp_rmem= 10240 87380 12582912</span><br><span class="line">net.ipv4.tcp_wmem= 10240 87380 12582912</span><br><span class="line">net.ipv4.tcp_window_scaling = 1</span><br><span class="line">net.ipv4.tcp_timestamps = 1</span><br><span class="line">net.ipv4.tcp_sack = 1</span><br><span class="line">net.ipv4.tcp_no_metrics_save = 1</span><br><span class="line">net.core.netdev_max_backlog = 5000</span><br></pre></td></tr></table></figure>
<p>直接修改 docker 的 sysctl 是不能成功的。 在 docker-compose 中可以通过使用 <a href="https://docs.docker.com/network/host/" target="_blank" rel="noopener">network_mode: “host”</a> ，修改宿主机的参数来实现。 缺点时集群模式无法使用，并且容器和宿主机共享网络空间，无法做到隔离。 </p>
<ol start="2">
<li><p><a href="https://docs.docker.com/engine/reference/run/#runtime-privilege-and-linux-capabilities" target="_blank" rel="noopener">使用 –privileged</a> </p>
<p>默认情况下  docker 容器是无特权的。容器不允许访问任何的设备。授予 –privileged  后，Docker 启动对宿主机的所有设备的访问。以允许容器对主机的访问几乎与在主机上容器外部运行的进程相同。</p>
</li>
</ol>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-image">
        <a href="/dev/Dockerfile编写实践/" class="image is-7by1">
            <img class="thumbnail" src="https://raw.githubusercontent.com/xxiu/img/asset/img/20190628152955.png" alt="Dockerfile编写实践">
        </a>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-07-09T01:32:02.000Z">2019-07-09</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/./dev/">dev</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    6 分钟 读完 (大约 884 个字)
                </span>
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/dev/Dockerfile编写实践/">Dockerfile编写实践</a>
            
        </h1>
        <div class="content">
            <p>Docker 镜像是由 Layers 组成，Dockerfile 中每一条指令都会创建一个层，层数最多 127 层。</p>
<ol>
<li><p>选择更小的基础镜像</p>
<p>通常我们使用的镜像有 Ubuntu 、CentOs、 debian 、Alpine 。其中推荐使用 Alpine ，Alpine 的基础镜像只有 4.4M 左右，</p>
<p>1.1 scratch 镜像</p>
<p>​     scratch 镜像是空镜像。如果要运行一个包含所有依赖的二进制文件，可以直接使用 scratch 作为基础镜像。</p>
<p>1.2 busybox 镜像</p>
<p>​        scratch是个空镜像，如果希望镜像里可以包含一些常用的Linux工具，busybox镜像是个不错选择，镜像本身只有1.16M，非常便于构建小镜像。</p>
</li>
<li><p>减少镜像层数</p>
<p>将多条指令写成一条。如果有太多的 RUN,会导致镜像臃肿，使用时通过 <code>&amp;&amp;</code> 和 <code>/</code> 来实现。每个 RUN执行完后记得清理不需要的缓存文件等。降低镜像体积。</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -rf /var/lib/apt/lists/*</span><br></pre></td></tr></table></figure>
</li>
<li><p>多阶段构建</p>
<p>Dockerfile中每条指令都会为镜像增加一个镜像层，并且你需要在移动到下一个镜像层之前清理不需要的组件。实际上，有一个Dockerfile用于开发（其中包含构建应用程序所需的所有内容）以及一个用于生产的瘦客户端，它只包含你的应用程序以及运行它所需的内容。这被称为“建造者模式”。<strong>Docker 17.05.0-ce</strong> 版本以后支持多阶段构建。使用多阶段构建，你可以在Dockerfile中使用多个<code>FROM</code>语句，每条<code>FROM</code>指令可以使用不同的基础镜像，这样您可以选择性地将服务组件从一个阶段<code>COPY</code>到另一个阶段，在最终镜像中只保留需要的内容。</p>
</li>
</ol>
<p>下面是一个使用<code>COPY --from</code> 和 <code>FROM ... AS ...</code> 的Dockerfile：</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># Compile</span><br><span class="line">FROM golang:1.9.0 AS builder</span><br><span class="line">WORKDIR /go/src/v9.git...com/.../k8s-monitor</span><br><span class="line">COPY . .</span><br><span class="line">WORKDIR /go/src/v9.git...com/.../k8s-monitor</span><br><span class="line">RUN make build</span><br><span class="line">RUN mv k8s-monitor /root</span><br><span class="line"></span><br><span class="line"># Package</span><br><span class="line"># Use scratch image</span><br><span class="line">FROM scratch</span><br><span class="line">WORKDIR /root/</span><br><span class="line">COPY --from=builder /root .</span><br><span class="line">EXPOSE 8080</span><br><span class="line">CMD [&quot;/root/k8s-monitor&quot;]</span><br></pre></td></tr></table></figure>
<p>构建镜像，你会发现生成的镜像只有上面<code>COPY</code> 指令指定的内容，镜像大小只有2M。这样在以前使用两个Dockerfile，现在使用多阶段构建就可以搞定。</p>
<ol start="4">
<li><p>将不变的内容尽量提前</p>
<p>如果层没有变化，Docker build 的时候会利用缓存，在开发的时候，比如 npm 、pip 之类的包管理工具，可以将配置文件提前到代码之前，然后 copy 代码后将缓存目录软连到目录，避免每次代码都需要npm 。</p>
<p>在实际处理过程中，可能会出现一些依赖无法处理，导致不能够提前。build 时可以采用多阶段构建。</p>
<p>或者直接 -v 本地代码目录，直接使用缓存。</p>
</li>
</ol>
<ol start="5">
<li><p>提前配置国内源</p>
<p>由于网络原因。系统源，代码包管理源速度都会慢，或者无法访问。需要将源信息提前配置到 dockerfile 中。</p>
<p>阿里源  <a href="https://opsx.alibaba.com/mirror" target="_blank" rel="noopener">https://opsx.alibaba.com/mirror</a></p>
<p>腾讯源 <a href="https://mirrors.cloud.tencent.com/" target="_blank" rel="noopener">https://mirrors.cloud.tencent.com/</a></p>
<p>清华大学源  <a href="https://mirrors.tuna.tsinghua.edu.cn/" target="_blank" rel="noopener">https://mirrors.tuna.tsinghua.edu.cn/</a></p>
</li>
<li><p>设置时区</p>
<p>不同的镜像默认的时区可能不同，导致运行时获取的时间不一致。</p>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RUN ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br></pre></td></tr></table></figure>
</li>
</ol>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-image">
        <a href="/dev/docker-build/" class="image is-7by1">
            <img class="thumbnail" src="https://raw.githubusercontent.com/xxiu/img/asset/img/20190628152955.png" alt="docker build openwrt 遇到的小问题">
        </a>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2019-01-04T09:15:54.000Z">2019-01-04</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/./dev/">dev</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    5 分钟 读完 (大约 805 个字)
                </span>
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/dev/docker-build/">docker build openwrt 遇到的小问题</a>
            
        </h1>
        <div class="content">
            <p>在使用 docker 编译 openwrt 遇到了两个坑，问题不复杂，却折腾了一天。</p>
<p>环境如下</p>
<ul>
<li><p>Dockerfile     定义编译 openwrt 的编译环境</p>
</li>
<li><p>docker-compose.yml  定义变化 openwrt 的运行配置，主要是将代码目录 data 使用 -v 映射到容器中</p>
</li>
<li><p>/data  代码存放目录</p>
</li>
</ul>
<p>开发流程就两步：</p>
<ol>
<li>docker-compose build 编译镜像</li>
<li>docker-compose run openwrt bash 进入编译环境</li>
</ol>
<p>在前一天执行第二步出错后，发现需要添加新的 lib 库，于是更新 Dockerfile ，在 Dockerfile 中添加了缺失的 lib。然后执行docker-compose build,但是执行这一步却卡死在命令行里。重试了 N 次也没有任何效果。</p>
<p>于是使用 原生的 docker build 来编译镜像</p>
<pre><code>docker build -t &lt;image name&gt; .
</code></pre><p>放弃 docker-compose ，使用 docker build  来编译，出现了Sending build context to Docker daemon 的提示。</p>
<p>提示是将编译的上下文发送给守护进程。昨天将 openwrt 的编译相关的源码全部都放到了当前目录的 data 目录下。openwrt 的源码加上 dl 目录的文件，整体超过了 10 个 G。</p>
<p>命令行的提示在发送需要编译的内容给 docker 的守护进程，这里突然意识到 docker 在将这 10 几个 G 的文件发送给 docker 守护进程。这样不死才怪。</p>
<p>查看docker官方文档，其中有关的说明, docker 会将 build 指定的目录下的文件都发送给 docker 的守护进程。 docker 提供了 .dockerignore  文件用来过滤，避免不必要的大文件，敏感文件发送到守护进程。 .dockerignore 文件的用法和 .gitignore 文件用法类似。 官方提示最好每个 docker build 的目录最好都提供一个 .dockerignore 文件。</p>
<p>创建一个 .dockerignore 并将 data 目录添加到文件里。然后重新执行 docker-compose build。 解决了这个问题。</p>
<p>在编译镜像过程中，还出现了另外的一个问题。由于 mac 上的空间不够，在 docker 的设置里执行 Move disk image 将 Docker.raw文件挪到扩展卡上，我记得扩展卡剩余空间有 70G 左右。但是在执行的时候总是失败。尝试了几次之后。开始怀疑 docker 在 mac 上有问题。询问同事，都表示没出现过。</p>
<p>用 ncdu 查看扩展卡的硬盘容量占用。 发现硬盘容量剩余 1G 左右。文件夹.Spotlight-V100 占用 48G。文件夹是 Spotlight的索引文件。 这个可能是昨天在编译 openwrt 时，mac 创建索引出现了一些问题导致的。 删除这个索引目录后，硬盘空间又回来了。从新’Move disk image’，执行成功。</p>
<p>在编译 openwrt 时，硬盘占用确实是个大问题，以前使用 vagrant 虚拟机作为编译开发环境，一个 box 编译多次后体积可能会超过30G ，虚拟机的硬盘扩容还麻烦，使用 docker 作为开发编译环境，随用随起，方便不少。</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-image">
        <a href="/dev/docker-compose-external-links/" class="image is-7by1">
            <img class="thumbnail" src="https://raw.githubusercontent.com/xxiu/img/asset/img/20190628152955.png" alt="docker-compose 中的 external-links">
        </a>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-12-26T09:08:45.000Z">2018-12-26</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/./dev/">dev</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    2 分钟 读完 (大约 282 个字)
                </span>
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/dev/docker-compose-external-links/">docker-compose 中的 external-links</a>
            
        </h1>
        <div class="content">
            <p>在使用服务时使用同一台服务器的 mysql 的 docker 服务。想到 external-links 这个配置。</p>
<p>按照文档的配置添加了如下配置</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">external_links:</span><br><span class="line"> - mysql_mysql_1:mysql</span><br></pre></td></tr></table></figure>
<p>但是配置无论如何都不成功。</p>
<p><a href="https://docs.docker.com/compose/compose-file/#external_links" target="_blank" rel="noopener">https://docs.docker.com/compose/compose-file/#external_links</a></p>
<p>官方文档相关的描述，</p>
<blockquote>
<p>If you’re using the <a href="https://docs.docker.com/compose/compose-file/compose-versioning/#version-2" target="_blank" rel="noopener">version 2 or above file format</a>, the externally-created containers must be connected to at least one of the same networks as the service that is linking to them.</p>
</blockquote>
<p>也就是说想要使用 external_links 是需要两个服务在<strong>同一个网络段</strong>，这里只提了一句，对第一次写配置文件的开发者非常的不友好。</p>
<ol>
<li><p>创建网络</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker network create -d bridge my_default</span><br><span class="line">cb1e8d02683ad3dc0bff2881dccb2d3b05cab855b1d463d2cb45685a97dd196b</span><br></pre></td></tr></table></figure>
</li>
<li><p>给mysql 服务添加网络</p>
<figure class="highlight yaml hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-attr">version:</span> <span class="hljs-string">'2'</span></span><br><span class="line"><span class="hljs-attr">services:</span></span><br><span class="line"><span class="hljs-attr">  mysql:</span></span><br><span class="line"><span class="hljs-attr">    image:</span> <span class="hljs-attr">mysql:5.7</span></span><br><span class="line"><span class="hljs-attr">    networks:</span></span><br><span class="line"><span class="hljs-bullet">      -</span> <span class="hljs-string">my_default</span></span><br><span class="line"><span class="hljs-attr">networks:</span></span><br><span class="line"><span class="hljs-attr">  my_default:</span></span><br><span class="line"><span class="hljs-attr">    external:</span> <span class="hljs-literal">true</span></span><br></pre></td></tr></table></figure>
<p>主要是最后一段</p>
</li>
<li><p>给服务添加网络</p>
<figure class="highlight yaml hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-attr">services:</span></span><br><span class="line"><span class="hljs-attr">  project:</span></span><br><span class="line"><span class="hljs-attr">    networks:</span></span><br><span class="line"><span class="hljs-bullet">      -</span> <span class="hljs-string">my_default</span></span><br><span class="line"><span class="hljs-attr">    external_links:</span></span><br><span class="line"><span class="hljs-attr">      - mysql_mysql_1:</span><span class="hljs-string">mysql</span></span><br><span class="line"><span class="hljs-attr">      - redis_redis_1:</span><span class="hljs-string">redis</span></span><br><span class="line"><span class="hljs-attr">networks:</span></span><br><span class="line"><span class="hljs-attr">  my_default:</span></span><br><span class="line"><span class="hljs-attr">    external:</span> <span class="hljs-literal">true</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>以上的配置中删除了和网络配置不相关的配置。</p>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-12-19T09:03:31.000Z">2018-12-19</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/./dev/">dev</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    2 分钟 读完 (大约 311 个字)
                </span>
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/dev/minikube/">minikube</a>
            
        </h1>
        <div class="content">
            <p>​​</p>
<h4 id="Minikube"><a href="#Minikube" class="headerlink" title="Minikube"></a>Minikube</h4><ol>
<li><p>安装minikube</p>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -Lo minikube https://storage.googleapis.com/minikube/releases/latest/minikube-darwin-amd64 &amp;&amp; \</span><br><span class="line">  chmod +x minikube &amp;&amp; \</span><br><span class="line">  sudo mv minikube /usr/local/bin/</span><br></pre></td></tr></table></figure>
<p>阿里修改版的</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -Lo minikube http://kubernetes.oss-cn-hangzhou.aliyuncs.com/minikube/releases/v0.30.0/minikube-darwin-amd64 &amp;&amp; chmod +x minikube &amp;&amp; sudo mv minikube /usr/local/bin/</span><br></pre></td></tr></table></figure>
</li>
<li><p><del>安装 xhyve（已经被弃用）</del></p>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">brew install docker-machine-driver-xhyve</span><br><span class="line">sudo chown root:wheel $(brew --prefix)/opt/docker-machine-driver-xhyve/bin/docker-machine-driver-xhyve</span><br><span class="line">sudo chmod u+s $(brew --prefix)/opt/docker-machine-driver-xhyve/bin/docker-machine-driver-xhyve</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装 hyperkit</p>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl -LO https://storage.googleapis.com/minikube/releases/latest/docker-machine-driver-hyperkit \</span><br><span class="line">&amp;&amp; chmod +x docker-machine-driver-hyperkit \</span><br><span class="line">&amp;&amp; sudo mv docker-machine-driver-hyperkit /usr/local/bin/ \</span><br><span class="line">&amp;&amp; sudo chown root:wheel /usr/local/bin/docker-machine-driver-hyperkit \</span><br><span class="line">&amp;&amp; sudo chmod u+s /usr/local/bin/docker-machine-driver-hyperkit</span><br></pre></td></tr></table></figure>
<p> 参考： <a href="https://github.com/kubernetes/minikube/blob/master/docs/drivers.md#hyperkit-driver" target="_blank" rel="noopener">https://github.com/kubernetes/minikube/blob/master/docs/drivers.md#hyperkit-driver</a></p>
<p> ​      <a href="https://blog.arkey.fr/2018/06/18/minikube-with-hyperkit/" target="_blank" rel="noopener">https://blog.arkey.fr/2018/06/18/minikube-with-hyperkit/</a></p>
</li>
<li><p>下载 kubectl</p>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install kubectl</span><br></pre></td></tr></table></figure>
</li>
<li><p>启动</p>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">minikube start --vm-driver=hyperkit --registry-mirror=https://registry.docker-cn.com  --alsologtostderr --v 10</span><br></pre></td></tr></table></figure>
<p> 配置有问题可以 rm -rf ~/.minikube   后重新启动 ，修改驱动会导致失败</p>
</li>
<li><p>验证配置</p>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kubectl cluster-info</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>使用mimikube相同的Docker 主机镜像</p>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">eval $(minikube docker-env)    #设置</span><br><span class="line">eval $(minikube docker-env -u)  #撤销设置</span><br></pre></td></tr></table></figure>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">kubectl config get-contexts  #获取k8s环境</span><br><span class="line">kubectl config use-context docker-for-desktop  # 切换到系统</span><br><span class="line">kubectl config use-context minikube  #切换到minikube</span><br></pre></td></tr></table></figure>
<p>打开控制面板</p>
<figure class="highlight bash hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">minikube dashboard</span><br></pre></td></tr></table></figure>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-12-05T06:24:51.000Z">2018-12-05</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/./dev/">dev</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    6 分钟 读完 (大约 862 个字)
                </span>
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/dev/Jenkins-docker-ansible自动化上线/">Jenkins-docker-ansible自动化上线</a>
            
        </h1>
        <div class="content">
            <p>从11月开始到现在，项目开始从 php 转换到 nodejs  + 后端服务，相应的部署环境转换到docker。</p>
<p>在使用纯php环境，上线比较简单，主要是代码拉取，拷贝和软链切换。 运行环境使用docker后相应的需要引入一个打包的过程，所以前面所依靠的上线部署系统无法满足当前的需求。</p>
<p>目前来说，Jenkins 作为自动化的流水线工具，几乎是不二的选择。</p>
<p>将 Jenkins 作为流水线工具，在打包阶段依赖 docker-compose。 上线阶段依赖 ansible 。</p>
<h1 id="jenkins-流程"><a href="#jenkins-流程" class="headerlink" title="jenkins 流程"></a>jenkins 流程</h1><ul>
<li><p>Git 拉取代码</p>
</li>
<li><p>Jenkins 根据不同的上线配置不同的脚本</p>
</li>
<li><p>docker-compose 打包代码</p>
<p>指定-f 参数来决定不同的镜像</p>
<p>项目下:</p>
<p>​ docker-compose.yml  对应正式环境 ，Jenkins 绑定到 master 分支</p>
<p>​ docker-compose.dev.yml 对应测试环境， Jenkins 绑定到 develop 分支</p>
<p>​ 由于打包过程使用的 dockerfile 都一样。 在自行的测试环境上可以自行编辑个人的docker-compose文件来作为开发环境。在 .gitignore 里面讲个人配置文件过滤掉。</p>
</li>
<li><p>docker-compose 上传代码</p>
<p>同打包代码一样，使用 -f 参数来指定 docker-compose 文件来上传。</p>
</li>
<li><p>执行ansible 的 playbook 来完成上线</p>
</li>
</ul>
<p>整个过程相对来说比较简单，总结下来：1）jenkins负责docker打包和发布，2）ansible 负责线上部署脚本。</p>
<p>整个部署过程全部都是脚本化</p>
<ol>
<li>jenkins 脚本由 Jenkinsfile 负责</li>
<li>docker 编译发布 由 docker-compose.yml 负责</li>
<li>线上发布有 ansible playbook.yml 负责。</li>
</ol>
<p>所有的脚本全部都放下项目目录的deploy里面。涉及到私密信息，保存在 Jenkins 或者 ansible 的配置中，脚本中使用变量来替换。</p>
<h1 id="ansible-流程"><a href="#ansible-流程" class="headerlink" title="ansible 流程"></a>ansible 流程</h1><p>ansible 在整个流程中负责与线上的机器交互，交互过程脚本话，全部都在一个名为 playbook.yml 的脚本中</p>
<p>在 Jenkins 中调用只需要一行</p>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ansiblePlaybook credentialsId: '2495416d-79bb-4c43-9759-76102a166b3d',</span><br><span class="line">                                   playbook: 'playbook.yml',</span><br><span class="line">                                   extraVars: [</span><br><span class="line">                                           workspace: "$&#123;WORKSPACE&#125;"</span><br><span class="line">                                           ]</span><br></pre></td></tr></table></figure>
<p>playbook 负责</p>
<ol>
<li>copy 配置文件</li>
<li>根据配置文件，拉取docker image</li>
<li>更新现有配置文件</li>
<li>重新启动docker</li>
<li>重新加载 nginx 配置</li>
</ol>
<h1 id="docker-打包"><a href="#docker-打包" class="headerlink" title="docker 打包"></a>docker 打包</h1><p>部署上线，涉及到nodejs项目需要使用 <code>npm install</code> 或者 php 项目需要使用 <code>compose install</code>的，按照正常的项目配置，每次在 docker build 的过程，由于源码变化，导致了每次执行初始化的过程都需要重新安装。</p>
<p>我希望在自动化部署上线中，docker build 的过程时间越短越好。所以就需要利用到 docker images 的缓存。如果当前层没有发生变化，那么 docker 在打包过程中会自动使用缓存。</p>
<p>所以，将 nodejs 项目中的 package.json 或者 php 项目中的 composer.json 实现负责到指定文件夹做初始化。这样就可以让这段耗时 install 过程在第一次编译完成后充分的利用 docker cache。</p>
<p>比如：</p>
<p>常规流程</p>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ADD . /var/www/source</span><br><span class="line">WORKDIR /var/www/source</span><br><span class="line">RUN npm install \</span><br><span class="line">    &amp;&amp; npm run build</span><br></pre></td></tr></table></figure>
<p>修改后流程</p>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ADD  ./package*.json /var/www/node/</span><br><span class="line">WORKDIR /var/www/node</span><br><span class="line">RUN npm install</span><br><span class="line"></span><br><span class="line">ADD . /var/www/source</span><br><span class="line">WORKDIR /var/www/source</span><br><span class="line">RUN ln -sf ../node/node_modules ./node_modules \</span><br><span class="line">    &amp;&amp; npm run build</span><br></pre></td></tr></table></figure>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-11-02T09:24:17.000Z">2018-11-02</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/./dev/">dev</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    3 分钟 读完 (大约 500 个字)
                </span>
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/dev/Harbor配置-DockerRegistry私有镜像仓库/">Harbor配置-DockerRegistry私有镜像仓库</a>
            
        </h1>
        <div class="content">
            <h1 id="Harbor简介"><a href="#Harbor简介" class="headerlink" title="Harbor简介"></a><a name="hrk3bg"></a>Harbor简介</h1><p>Harbor<code>是</code>VMware<code>公司开源的企业级</code>Docker Registry<code>项目，其目标是帮助用户迅速搭建一个企业级的</code>Docker registry`服务。</p>
<p>它以<code>Docker</code>公司开源的<code>registry</code>为基础，提供了管理<code>UI</code>，基于角色的访问控制(<code>Role Based AccessControl</code>)，<code>AD/LDAP</code>集成、以及审计日志(<code>Auditlogging</code>) 等企业用户需求的功能，通过添加一些企业必需的功能特性，例如安全、标识和管理等，扩展了开源 <code>Docker Distribution</code>。</p>
<h1 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a><a name="9eq0tf"></a>环境准备</h1><ul>
<li>Ubuntu 14.04</li>
<li>Docker and Docker Compose</li>
</ul>
<h4 id="Docker-Compose-安装"><a href="#Docker-Compose-安装" class="headerlink" title="Docker Compose 安装"></a><a name="0g0sth"></a>Docker Compose 安装</h4><pre><code><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo curl -L "https://github.com/docker/compose/releases/download/1.22.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose</span><br><span class="line"></span><br><span class="line">sudo chmod +x /usr/local/bin/docker-compose</span><br><span class="line"></span><br><span class="line"><span class="hljs-meta">$</span> docker-compose --version</span><br><span class="line">docker-compose version 1.22.0, build f46880fe</span><br></pre></td></tr></table></figure>
</code></pre><ul>
<li>python</li>
</ul>
<h1 id="Harbor下载"><a href="#Harbor下载" class="headerlink" title="Harbor下载"></a><a name="9qd2rr"></a>Harbor下载</h1><p>下载Harbour版本的二进制文件 <a href="https://github.com/vmware/harbor/releases" target="_blank" rel="noopener">https://github.com/vmware/harbor/releases</a></p>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://storage.googleapis.com/harbor-releases/release-1.6.0/harbor-offline-installer-v1.6.0.tgz</span><br><span class="line">tar -zxvf harbor-offline-installer-v1.6.0.tgz</span><br></pre></td></tr></table></figure>
<p>官方的链接正常无法下载，感谢戴亚同学帮忙。</p>
<p>下载解压后进入解压的文件夹</p>
<h1 id="Harbor配置"><a href="#Harbor配置" class="headerlink" title="Harbor配置"></a><a name="y016pk"></a>Harbor配置</h1><p>解压后目录下生成 harbor.conf  文件，根据需要修改配置文件。</p>
<h1 id="Harbor启动"><a href="#Harbor启动" class="headerlink" title="Harbor启动"></a><a name="2ec0rk"></a>Harbor启动</h1><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./install.sh</span><br></pre></td></tr></table></figure>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/home/zhangwei# docker ps -a</span><br><span class="line">CONTAINER ID        IMAGE                                    COMMAND                  CREATED             STATUS                PORTS                                                                NAMES</span><br><span class="line">136373bd5377        goharbor/harbor-jobservice:v1.6.0        "/harbor/start.sh"       2 days ago          Up 2 days                                                                                  harbor-jobservice</span><br><span class="line">e593d2a724de        goharbor/nginx-photon:v1.6.0             "nginx -g 'daemon of…"   2 days ago          Up 2 days (healthy)   0.0.0.0:443-&gt;443/tcp, 0.0.0.0:4443-&gt;4443/tcp, 0.0.0.0:1080-&gt;80/tcp   nginx</span><br><span class="line">f29c2341d237        goharbor/harbor-ui:v1.6.0                "/harbor/start.sh"       2 days ago          Up 2 days (healthy)                                                                        harbor-ui</span><br><span class="line">a03a1bab796f        goharbor/harbor-adminserver:v1.6.0       "/harbor/start.sh"       2 days ago          Up 2 days (healthy)                                                                        harbor-adminserver</span><br><span class="line">c11b5b108311        goharbor/redis-photon:v1.6.0             "docker-entrypoint.s…"   2 days ago          Up 2 days             6379/tcp                                                             redis</span><br><span class="line">6d95f6c0aaf3        goharbor/harbor-db:v1.6.0                "/entrypoint.sh post…"   2 days ago          Up 2 days (healthy)   5432/tcp                                                             harbor-db</span><br><span class="line">2fa99bb3d06c        goharbor/registry-photon:v2.6.2-v1.6.0   "/entrypoint.sh /etc…"   2 days ago          Up 2 days (healthy)   5000/tcp                                                             registry</span><br><span class="line">da21879d2dd1        goharbor/harbor-log:v1.6.0               "/bin/sh -c /usr/loc…"   2 days ago          Up 2 days (healthy)   127.0.0.1:1514-&gt;10514/tcp                                            harbor-log</span><br></pre></td></tr></table></figure>
<p>根据需要修改docker-compose.yml 文件的端口</p>
<figure class="highlight plain hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">proxy:</span><br><span class="line">  image: goharbor/nginx-photon:v1.6.0</span><br><span class="line">  container_name: nginx</span><br><span class="line">  restart: always</span><br><span class="line">  volumes:</span><br><span class="line">    - ./common/config/nginx:/etc/nginx:z</span><br><span class="line">  networks:</span><br><span class="line">    - harbor</span><br><span class="line">  ports:</span><br><span class="line">    - 1080:80</span><br><span class="line">    - 443:443</span><br><span class="line">    - 4443:4443</span><br></pre></td></tr></table></figure>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-image">
        <a href="/dev/Docker私有源配置/" class="image is-7by1">
            <img class="thumbnail" src="https://raw.githubusercontent.com/xxiu/img/asset/img/20190628152955.png" alt="Docker私有源配置">
        </a>
    </div>
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-11-02T09:22:08.000Z">2018-11-02</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/./dev/">dev</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    6 分钟 读完 (大约 836 个字)
                </span>
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/dev/Docker私有源配置/">Docker私有源配置</a>
            
        </h1>
        <div class="content">
            <h2 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a><a name="9ggegs"></a>基本命令</h2><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run -d -p 5000:5000 --restart=always  --name registry \</span><br><span class="line">		-v /home/docker/registry:/var/lib/registry registry:2 # 加入restart=always 跟随docker启动时自启动</span><br><span class="line"><span class="hljs-meta">#</span> 本地启动后镜像服务器的地址为 localhost:5000</span><br></pre></td></tr></table></figure>
<p>运行后会自动到docker hub 上拉取</p>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">registry            2                   2e2f252f3c88        4 weeks ago         33.3MB</span><br></pre></td></tr></table></figure>
<h2 id="Docker-镜像命名规则"><a href="#Docker-镜像命名规则" class="headerlink" title="Docker 镜像命名规则"></a><a name="mk2kbn"></a>Docker 镜像命名规则</h2><p>完整的image名称：<code>registry.domain.com/name/base:latest</code></p>
<ol>
<li><code>registry.domain.com</code> image 所在服务器地址</li>
<li><code>name</code> 命名空间</li>
<li><code>base</code> 具体名字</li>
<li><code>latest</code> 版本号</li>
</ol>
<h2 id="验证本地私有镜像"><a href="#验证本地私有镜像" class="headerlink" title="验证本地私有镜像"></a><a name="itqsig"></a>验证本地私有镜像</h2><ol>
<li>本地存在一个ubuntu:16.04 的镜像</li>
</ol>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@pprt-s1:/home/docker# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">registry            2                   2e2f252f3c88        4 weeks ago         33.3MB</span><br><span class="line">ubuntu              16.04               b9e15a5d1e1a        5 weeks ago         115MB</span><br></pre></td></tr></table></figure>
<ol>
<li>添加一个新的tag<code>localhost:5000/ubuntu:16.04</code></li>
</ol>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">root@pprt-s1:/home/docker# docker tag ubuntu:16.04 localhost:5000/ubuntu:16.04</span><br><span class="line">root@pprt-s1:/home/docker# docker  images</span><br><span class="line">REPOSITORY              TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">registry                2                   2e2f252f3c88        4 weeks ago         33.3MB</span><br><span class="line">ubuntu                  16.04               b9e15a5d1e1a        5 weeks ago         115MB</span><br><span class="line">localhost:5000/ubuntu   16.04               b9e15a5d1e1a        5 weeks ago         115MB</span><br></pre></td></tr></table></figure>
<ol>
<li>将镜像<code>localhost:5000/ubuntu:16.04</code> push 到私有源</li>
</ol>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">root@pprt-s1:/home/docker# docker push  localhost:5000/ubuntu:16.04</span><br><span class="line">The push refers to repository [localhost:5000/ubuntu]</span><br><span class="line">75b79e19929c: Pushed</span><br><span class="line">4775b2f378bb: Pushed</span><br><span class="line">883eafdbe580: Pushed</span><br><span class="line">19d043c86cbc: Pushed</span><br><span class="line">8823818c4748: Pushed</span><br><span class="line">16.04: digest: sha256:9b47044b1e79b965a8e1653e7f9c04b5f63e00b9161bedd5baef69bb8b4c4834 size: 1357</span><br></pre></td></tr></table></figure>
<ol>
<li>删除本地 localhost:5000/ubuntu:16.04</li>
</ol>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">root@pprt-s1:/home/docker# docker image rm localhost:5000/ubuntu:16.04</span><br><span class="line">Untagged: localhost:5000/ubuntu:16.04</span><br><span class="line">Untagged: localhost:5000/ubuntu@sha256:9b47044b1e79b965a8e1653e7f9c04b5f63e00b9161bedd5baef69bb8b4c4834</span><br><span class="line">root@pprt-s1:/home/docker# docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">registry            2                   2e2f252f3c88        4 weeks ago         33.3MB</span><br><span class="line">ubuntu              16.04               b9e15a5d1e1a        5 weeks ago         115MB</span><br></pre></td></tr></table></figure>
<ol>
<li>从私有源拉取镜像，成功得到镜像</li>
</ol>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">root@pprt-s1:/home/docker# docker  pull localhost:5000/ubuntu:16.04</span><br><span class="line">16.04: Pulling from ubuntu</span><br><span class="line">Digest: sha256:9b47044b1e79b965a8e1653e7f9c04b5f63e00b9161bedd5baef69bb8b4c4834</span><br><span class="line">Status: Downloaded newer image for localhost:5000/ubuntu:16.04</span><br><span class="line">root@pprt-s1:/home/docker# docker images</span><br><span class="line">REPOSITORY              TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">registry                2                   2e2f252f3c88        4 weeks ago         33.3MB</span><br><span class="line">ubuntu                  16.04               b9e15a5d1e1a        5 weeks ago         115MB</span><br><span class="line">localhost:5000/ubuntu   16.04               b9e15a5d1e1a        5 weeks ago         115MB</span><br></pre></td></tr></table></figure>
<h1 id="身份验证"><a href="#身份验证" class="headerlink" title="身份验证"></a><a name="afh6gl"></a>身份验证</h1><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">$</span> mkdir auth</span><br><span class="line"><span class="hljs-meta">$</span> docker run \</span><br><span class="line">  --entrypoint htpasswd \</span><br><span class="line">  registry:2 -Bbn testuser testpassword &gt; auth/htpasswd</span><br></pre></td></tr></table></figure>
<h2 id="为外网提供服务"><a href="#为外网提供服务" class="headerlink" title="为外网提供服务"></a><a name="r2g7hw"></a>为外网提供服务</h2><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">sudo docker run -d -p 5000:5000 \</span><br><span class="line">	--restart=always  \</span><br><span class="line">	--name registry \</span><br><span class="line">	-e REGISTRY_HTTP_TLS_CERTIFICATE=/home/docker/cert_file/os.pprt.net/pprt.net.cer \</span><br><span class="line">    -e REGISTRY_HTTP_TLS_KEY=/home/docker/cert_file/os.pprt.net/pprt.net.key \</span><br><span class="line">	-v /home/docker/registry:/var/lib/registry \</span><br><span class="line">	-v `pwd`/auth:/auth \</span><br><span class="line">	-e "REGISTRY_AUTH=htpasswd" \</span><br><span class="line">    -e "REGISTRY_AUTH_HTPASSWD_REALM=Registry Realm" \</span><br><span class="line">    registry:2</span><br></pre></td></tr></table></figure>
<h3 id="nginx代理"><a href="#nginx代理" class="headerlink" title="nginx代理"></a><a name="r61bbv"></a>nginx代理</h3><p><a href="https://github.com/docker/docker-registry/blob/master/contrib/nginx/nginx.conf" target="_blank" rel="noopener">https://github.com/docker/docker-registry/blob/master/contrib/nginx/nginx.conf</a></p>
<p>nginx.conf</p>
<figure class="highlight nginx hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-comment"># For nginx &lt; 1.3.9</span></span><br><span class="line"><span class="hljs-comment"># FYI: Chunking requires nginx-extras package on Debian Wheezy and some Ubuntu versions</span></span><br><span class="line"><span class="hljs-comment"># See chunking http://wiki.nginx.org/HttpChunkinModule</span></span><br><span class="line"><span class="hljs-comment"># Replace with appropriate values where necessary</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-attribute">upstream</span> docker-registry &#123;</span><br><span class="line">  <span class="hljs-attribute">server</span> localhost:<span class="hljs-number">5000</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="hljs-comment"># uncomment if you want a 301 redirect for users attempting to connect</span></span><br><span class="line"><span class="hljs-comment"># on port 80</span></span><br><span class="line"><span class="hljs-comment"># <span class="hljs-doctag">NOTE:</span> docker client will still fail. This is just for convenience</span></span><br><span class="line"><span class="hljs-comment"># server &#123;</span></span><br><span class="line"><span class="hljs-comment">#   listen *:80;</span></span><br><span class="line"><span class="hljs-comment">#   server_name my.docker.registry.com;</span></span><br><span class="line"><span class="hljs-comment">#   return 301 https://$server_name$request_uri;</span></span><br><span class="line"><span class="hljs-comment"># &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-section">server</span> &#123;</span><br><span class="line">  <span class="hljs-attribute">listen</span> <span class="hljs-number">443</span>;</span><br><span class="line">  <span class="hljs-attribute">server_name</span> docker.os.pprt.net;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-attribute">ssl</span> <span class="hljs-literal">on</span>;</span><br><span class="line">  <span class="hljs-attribute">ssl_certificate</span> /home/docker/cert_file/fullchain.cer;</span><br><span class="line">  <span class="hljs-attribute">ssl_certificate_key</span> /home/docker/cert_file/pprt.net.key;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-attribute">client_max_body_size</span> <span class="hljs-number">0</span>; <span class="hljs-comment"># disable any limits to avoid HTTP 413 for large image uploads</span></span><br><span class="line"></span><br><span class="line">  <span class="hljs-comment"># required to avoid HTTP 411: see Issue #1486 (https://github.com/dotcloud/docker/issues/1486)</span></span><br><span class="line">  <span class="hljs-attribute">chunkin</span> <span class="hljs-literal">on</span>;</span><br><span class="line">  <span class="hljs-attribute">error_page</span> <span class="hljs-number">411</span> = <span class="hljs-variable">@my_411_error</span>;</span><br><span class="line">  <span class="hljs-attribute">location</span> <span class="hljs-variable">@my_411_error</span> &#123;</span><br><span class="line">    chunkin_resume;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-attribute">location</span> / &#123;</span><br><span class="line">    <span class="hljs-attribute">auth_basic</span>            <span class="hljs-string">"Restricted"</span>;</span><br><span class="line">    <span class="hljs-attribute">auth_basic_user_file</span>  docker-registry.htpasswd;</span><br><span class="line">    <span class="hljs-attribute">include</span>               docker-registry.conf;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-attribute">location</span> /_ping &#123;</span><br><span class="line">    <span class="hljs-attribute">auth_basic</span> <span class="hljs-literal">off</span>;</span><br><span class="line">    <span class="hljs-attribute">include</span>               docker-registry.conf;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-attribute">location</span> /v1/_ping &#123;</span><br><span class="line">    <span class="hljs-attribute">auth_basic</span> <span class="hljs-literal">off</span>;</span><br><span class="line">    <span class="hljs-attribute">include</span>               docker-registry.conf;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>docker-registry.conf</p>
<figure class="highlight nginx hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-attribute">proxy_pass</span>                       http://docker-registry;</span><br><span class="line"><span class="hljs-attribute">proxy_set_header</span>  Host           <span class="hljs-variable">$http_host</span>;   <span class="hljs-comment"># required for docker client's sake</span></span><br><span class="line"><span class="hljs-attribute">proxy_set_header</span>  X-Real-IP      <span class="hljs-variable">$remote_addr</span>; <span class="hljs-comment"># pass on real client's IP</span></span><br><span class="line"><span class="hljs-attribute">proxy_set_header</span>  Authorization  <span class="hljs-string">""</span>; <span class="hljs-comment"># see https://github.com/dotcloud/docker-registry/issues/170</span></span><br><span class="line"><span class="hljs-attribute">proxy_read_timeout</span>               <span class="hljs-number">900</span>;</span><br></pre></td></tr></table></figure>
<h3 id="查询"><a href="#查询" class="headerlink" title="查询"></a><a name="kfmfny"></a>查询</h3><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">$</span> curl http://domain.com/v2/_catalog</span><br><span class="line">&#123;"repositories":["ubuntu"]&#125;</span><br></pre></td></tr></table></figure>
<h3 id="停止并删除容器"><a href="#停止并删除容器" class="headerlink" title="停止并删除容器"></a><a name="506hdq"></a>停止并删除容器</h3><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker container stop registry &amp;&amp; docker container rm -v registry</span><br></pre></td></tr></table></figure>

        </div>
        
        
        
    </div>
</div>








    <div class="card">
    
    <div class="card-content article ">
        
        <div class="level article-meta is-size-7 is-uppercase is-mobile is-overflow-x-auto">
            <div class="level-left">
                <time class="level-item has-text-grey" datetime="2018-10-30T14:08:19.000Z">2018-10-30</time>
                
                <div class="level-item">
                <a class="has-link-grey -link" href="/./dev/">dev</a>
                </div>
                
                
                <span class="level-item has-text-grey">
                    
                    
                    3 分钟 读完 (大约 447 个字)
                </span>
                
            </div>
        </div>
        
        <h1 class="title is-size-3 is-size-4-mobile has-text-weight-normal">
            
                <a class="has-link-black-ter" href="/dev/安装Docker/">安装Docker</a>
            
        </h1>
        <div class="content">
            <p>docker docs : <a href="https://docs.docker.com" target="_blank" rel="noopener">https://docs.docker.com</a></p>
<h1 id="windows"><a href="#windows" class="headerlink" title="windows"></a><a name="bmpykk"></a>windows</h1><p>下载地址：<a href="https://store.docker.com/editions/community/docker-ce-desktop-windows" target="_blank" rel="noopener">https://store.docker.com/editions/community/docker-ce-desktop-windows</a></p>
<p>需要开启 Hyper-V</p>
<p>直接安装</p>
<h1 id="mac"><a href="#mac" class="headerlink" title="mac"></a><a name="vy2gfk"></a>mac</h1><p>下载地址 <a href="https://store.docker.com/editions/community/docker-ce-desktop-mac" target="_blank" rel="noopener">https://store.docker.com/editions/community/docker-ce-desktop-mac</a></p>
<p>直接安装 Docker.dmg .</p>
<h1 id="ubuntu"><a href="#ubuntu" class="headerlink" title="ubuntu"></a><a name="fcb5oh"></a>ubuntu</h1><p>如果是新安装的建议将<code>/etc/apt/source.list</code>内容替换为阿里源</p>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">deb https://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.aliyun.com/ubuntu/ trusty main restricted universe multiverse</span><br><span class="line">deb https://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.aliyun.com/ubuntu/ trusty-security main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">deb https://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.aliyun.com/ubuntu/ trusty-updates main restricted universe multiverse</span><br><span class="line"></span><br><span class="line">deb https://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse</span><br><span class="line">deb-src https://mirrors.aliyun.com/ubuntu/ trusty-backports main restricted universe multiverse</span><br></pre></td></tr></table></figure>
<h2 id="用脚本安装"><a href="#用脚本安装" class="headerlink" title="用脚本安装"></a><a name="lp9dki"></a>用脚本安装</h2><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">$</span><span class="hljs-bash"> curl -fsSL https://get.docker.com -o get-docker.sh</span></span><br><span class="line"><span class="hljs-meta">$</span><span class="hljs-bash"> sudo sh get-docker.sh</span></span><br></pre></td></tr></table></figure>
<h2 id="按步骤安装"><a href="#按步骤安装" class="headerlink" title="按步骤安装"></a><a name="m3cfuc"></a>按步骤安装</h2><p>安装 Docker CE 需要 64 位的 Ubuntu</p>
<h3 id="删除老版本的-Docker"><a href="#删除老版本的-Docker" class="headerlink" title="删除老版本的 Docker"></a><a name="htbkgm"></a>删除老版本的 Docker</h3><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">$</span><span class="hljs-bash"> sudo apt-get remove docker docker-engine docker.io</span></span><br></pre></td></tr></table></figure>
<h3 id="Docker-支持-aufs"><a href="#Docker-支持-aufs" class="headerlink" title="Docker 支持 aufs"></a><a name="ufpzbr"></a>Docker 支持 aufs</h3><p>ubunut14.04 需要，16.04 不需要</p>
<figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">$</span><span class="hljs-bash"> sudo apt-get update</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-meta">$</span><span class="hljs-bash"> sudo apt-get install \</span></span><br><span class="line">    linux-image-extra-$(uname -r) \</span><br><span class="line">    linux-image-extra-virtual</span><br><span class="line"></span><br><span class="line"><span class="hljs-meta">   #</span><span class="hljs-bash">问题 安装后机器起Docker会死机 升级内核到4.2后问题解决</span></span><br><span class="line">   sudo apt-get install linux-generic-lts-wily</span><br></pre></td></tr></table></figure>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a><a name="kbh9oe"></a>安装</h3><h4 id="update-apt-get"><a href="#update-apt-get" class="headerlink" title="update apt-get"></a><a name="w0nlpm"></a>update apt-get</h4><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">$</span><span class="hljs-bash"> sudo apt-get update</span></span><br></pre></td></tr></table></figure>
<h4 id="添加apt-https-支持"><a href="#添加apt-https-支持" class="headerlink" title="添加apt https 支持"></a><a name="bz2zav"></a>添加apt https 支持</h4><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">$</span><span class="hljs-bash"> sudo apt-get install \</span></span><br><span class="line">    apt-transport-https \</span><br><span class="line">    ca-certificates \</span><br><span class="line">    curl \</span><br><span class="line">    software-properties-common</span><br></pre></td></tr></table></figure>
<h4 id="添加-Docker-GPG-key"><a href="#添加-Docker-GPG-key" class="headerlink" title="添加 Docker GPG key"></a><a name="h20ikf"></a>添加 Docker GPG key</h4><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">$</span><span class="hljs-bash"> curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</span></span><br><span class="line"><span class="hljs-meta">$</span><span class="hljs-bash"> sudo apt-key fingerprint 0EBFCD88 <span class="hljs-comment">#验证</span></span></span><br><span class="line">pub   4096R/0EBFCD88 2017-02-22</span><br><span class="line">      Key fingerprint = 9DC8 5822 9FC7 DD38 854A  E2D8 8D81 803C 0EBF CD88</span><br><span class="line">uid                  Docker Release (CE deb) &lt;docker@docker.com&gt;</span><br><span class="line">sub   4096R/F273FCD8 2017-02-22</span><br><span class="line"></span><br><span class="line"><span class="hljs-meta">$</span><span class="hljs-bash"> sudo add-apt-repository \</span></span><br><span class="line">   "deb [arch=amd64] https://download.docker.com/linux/ubuntu \</span><br><span class="line"><span class="hljs-meta">   $</span><span class="hljs-bash">(lsb_release -cs) \</span></span><br><span class="line">   stable"</span><br></pre></td></tr></table></figure>
<h4 id="安装Docker-CE"><a href="#安装Docker-CE" class="headerlink" title="安装Docker-CE"></a><a name="nnfsrr"></a>安装Docker-CE</h4><figure class="highlight shell hljs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-meta">$</span><span class="hljs-bash"> sudo apt-get update</span></span><br><span class="line"><span class="hljs-meta">$</span><span class="hljs-bash"> sudo apt-get install docker-ce <span class="hljs-comment">#写文档时最新版本docker version 18.06.1-ce</span></span></span><br><span class="line"><span class="hljs-meta">#</span><span class="hljs-bash"> $ sudo apt-get install docker-ce=&lt;VERSION&gt;  <span class="hljs-comment"># 安装指定版本的docker</span></span></span><br></pre></td></tr></table></figure>

        </div>
        
        
        
    </div>
</div>








</div>
                




<div class="column is-4-tablet is-4-desktop is-3-widescreen  has-order-1 column-left ">
    
        
<div class="card widget">
    <div class="card-content">
        <nav class="level">
            <div class="level-item has-text-centered">
                <div>
                    <img class="image is-128x128 has-mb-6" src="/images/avatar.png" alt="张巍的烂笔头">
                    
                    <p class="is-size-4 is-block">
                        张巍的烂笔头
                    </p>
                    
                    
                    <p class="is-size-6 is-block">
                        好记性不如烂笔头
                    </p>
                    
                    
                    <p class="is-size-6 is-flex is-flex-center has-text-grey">
                        <i class="fas fa-map-marker-alt has-mr-7"></i>
                        <span>China / BeiJing</span>
                    </p>
                    
                </div>
            </div>
        </nav>
        <nav class="level is-mobile">
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        文章
                    </p>
                    <p class="title has-text-weight-normal">
                        83
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        分类
                    </p>
                    <p class="title has-text-weight-normal">
                        3
                    </p>
                </div>
            </div>
            <div class="level-item has-text-centered is-marginless">
                <div>
                    <p class="heading">
                        标签
                    </p>
                    <p class="title has-text-weight-normal">
                        61
                    </p>
                </div>
            </div>
        </nav>
        <div class="level">
            <a class="level-item button is-link is-rounded" href="http://github.com/xxiu">
                关注我</a>
        </div>
        
        
    </div>
</div>
    
        
    
        


    
        
<div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                分类
            </h3>
            <ul class="menu-list">
            <li>
        <a class="level is-marginless" href="/./dev/">
            <span class="level-start">
                <span class="level-item">dev</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">74</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/./note/">
            <span class="level-start">
                <span class="level-item">note</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">3</span>
            </span>
        </a></li><li>
        <a class="level is-marginless" href="/./tool/">
            <span class="level-start">
                <span class="level-item">tool</span>
            </span>
            <span class="level-end">
                <span class="level-item tag">5</span>
            </span>
        </a></li>
            </ul>
        </div>
    </div>
</div>
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            标签云
        </h3>
        <a href="/tags/net/" style="font-size: 10px;">.net</a> <a href="/tags/5g/" style="font-size: 10px;">5g</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/Portainer/" style="font-size: 10px;">Portainer</a> <a href="/tags/RocketMQ/" style="font-size: 10px;">RocketMQ</a> <a href="/tags/android/" style="font-size: 10px;">android</a> <a href="/tags/ansible/" style="font-size: 10px;">ansible</a> <a href="/tags/blog/" style="font-size: 10px;">blog</a> <a href="/tags/brew/" style="font-size: 10px;">brew</a> <a href="/tags/cache/" style="font-size: 10px;">cache</a> <a href="/tags/centos/" style="font-size: 10px;">centos</a> <a href="/tags/coap/" style="font-size: 10px;">coap</a> <a href="/tags/devops/" style="font-size: 10px;">devops</a> <a href="/tags/docker/" style="font-size: 20px;">docker</a> <a href="/tags/etl/" style="font-size: 10px;">etl</a> <a href="/tags/fastdfs/" style="font-size: 14.29px;">fastdfs</a> <a href="/tags/frp/" style="font-size: 10px;">frp</a> <a href="/tags/git/" style="font-size: 11.43px;">git</a> <a href="/tags/github/" style="font-size: 11.43px;">github</a> <a href="/tags/gitolite/" style="font-size: 10px;">gitolite</a> <a href="/tags/golang/" style="font-size: 10px;">golang</a> <a href="/tags/gzip/" style="font-size: 10px;">gzip</a> <a href="/tags/harbor/" style="font-size: 10px;">harbor</a> <a href="/tags/hexo/" style="font-size: 12.86px;">hexo</a> <a href="/tags/https/" style="font-size: 10px;">https</a> <a href="/tags/hugo/" style="font-size: 10px;">hugo</a> <a href="/tags/ikvm/" style="font-size: 10px;">ikvm</a> <a href="/tags/java/" style="font-size: 10px;">java</a> <a href="/tags/jenkins/" style="font-size: 14.29px;">jenkins</a> <a href="/tags/keepass/" style="font-size: 10px;">keepass</a> <a href="/tags/keettle/" style="font-size: 10px;">keettle</a> <a href="/tags/kettle/" style="font-size: 10px;">kettle</a> <a href="/tags/kong/" style="font-size: 10px;">kong</a> <a href="/tags/letsencrypt/" style="font-size: 11.43px;">letsencrypt</a> <a href="/tags/magick/" style="font-size: 10px;">magick</a> <a href="/tags/memcacheq/" style="font-size: 10px;">memcacheq</a> <a href="/tags/minikube/" style="font-size: 10px;">minikube</a> <a href="/tags/mysql/" style="font-size: 10px;">mysql</a> <a href="/tags/nginx/" style="font-size: 12.86px;">nginx</a> <a href="/tags/nsq/" style="font-size: 10px;">nsq</a> <a href="/tags/openwrt/" style="font-size: 10px;">openwrt</a> <a href="/tags/pdf/" style="font-size: 10px;">pdf</a> <a href="/tags/petl/" style="font-size: 10px;">petl</a> <a href="/tags/php/" style="font-size: 14.29px;">php</a> <a href="/tags/python/" style="font-size: 15.71px;">python</a> <a href="/tags/saltstack/" style="font-size: 18.57px;">saltstack</a> <a href="/tags/smarty/" style="font-size: 10px;">smarty</a> <a href="/tags/snowflake/" style="font-size: 10px;">snowflake</a> <a href="/tags/socket/" style="font-size: 10px;">socket</a> <a href="/tags/solr/" style="font-size: 17.14px;">solr</a> <a href="/tags/sqlserver/" style="font-size: 10px;">sqlserver</a> <a href="/tags/sublime/" style="font-size: 10px;">sublime</a> <a href="/tags/tesseract-ocr/" style="font-size: 10px;">tesseract-ocr</a> <a href="/tags/thrift/" style="font-size: 10px;">thrift</a> <a href="/tags/tmux/" style="font-size: 10px;">tmux</a> <a href="/tags/ubuntu/" style="font-size: 10px;">ubuntu</a> <a href="/tags/vagrant/" style="font-size: 10px;">vagrant</a> <a href="/tags/zabbix/" style="font-size: 11.43px;">zabbix</a> <a href="/tags/分布式/" style="font-size: 10px;">分布式</a> <a href="/tags/摇号/" style="font-size: 10px;">摇号</a> <a href="/tags/词库/" style="font-size: 10px;">词库</a>
    </div>
</div>

    
    
        <div class="column-right-shadow is-hidden-widescreen ">
        
            
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            最新文章
        </h3>
        
        <article class="media">
            
            <a href="/tcp连接数/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/static/default.jpg" alt="tcp连接数">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-01-10T02:36:34.000Z">2020-01-10</time></div>
                    <a href="/tcp连接数/" class="has-link-black-ter is-size-6">tcp连接数</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/./dev/">dev</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/dev/jenkins-deploy-question-md/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/static/default.jpg" alt="jenkins 配置说明">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-01-03T05:42:31.000Z">2020-01-03</time></div>
                    <a href="/dev/jenkins-deploy-question-md/" class="has-link-black-ter is-size-6">jenkins 配置说明</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/./dev/">dev</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/dev/生成分布式id-md/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/static/default.jpg" alt="生成分布式id">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-12-20T12:36:34.000Z">2019-12-20</time></div>
                    <a href="/dev/生成分布式id-md/" class="has-link-black-ter is-size-6">生成分布式id</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/./dev/">dev</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/dev/docker-sysctl/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/static/default.jpg" alt="docker_sysctl">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-12-12T02:54:47.000Z">2019-12-12</time></div>
                    <a href="/dev/docker-sysctl/" class="has-link-black-ter is-size-6">docker_sysctl</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/./dev/">dev</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/dev/rocketmq/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="https://raw.githubusercontent.com/xxiu/img/asset/img/20191129160333.png" alt="RocketMQ小记">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-12-06T15:16:35.000Z">2019-12-06</time></div>
                    <a href="/dev/rocketmq/" class="has-link-black-ter is-size-6">RocketMQ小记</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/./dev/">dev</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            归档
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2020/01/">
                <span class="level-start">
                    <span class="level-item">一月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/07/">
                <span class="level-start">
                    <span class="level-item">七月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/06/">
                <span class="level-start">
                    <span class="level-item">六月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/05/">
                <span class="level-start">
                    <span class="level-item">五月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/04/">
                <span class="level-start">
                    <span class="level-item">四月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/03/">
                <span class="level-start">
                    <span class="level-item">三月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/01/">
                <span class="level-start">
                    <span class="level-item">一月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/10/">
                <span class="level-start">
                    <span class="level-item">十月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/09/">
                <span class="level-start">
                    <span class="level-item">九月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/03/">
                <span class="level-start">
                    <span class="level-item">三月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/01/">
                <span class="level-start">
                    <span class="level-item">一月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/07/">
                <span class="level-start">
                    <span class="level-item">七月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/06/">
                <span class="level-start">
                    <span class="level-item">六月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/04/">
                <span class="level-start">
                    <span class="level-item">四月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/03/">
                <span class="level-start">
                    <span class="level-item">三月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/02/">
                <span class="level-start">
                    <span class="level-item">二月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/01/">
                <span class="level-start">
                    <span class="level-item">一月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/08/">
                <span class="level-start">
                    <span class="level-item">八月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/07/">
                <span class="level-start">
                    <span class="level-item">七月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">11</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/05/">
                <span class="level-start">
                    <span class="level-item">五月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/04/">
                <span class="level-start">
                    <span class="level-item">四月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/03/">
                <span class="level-start">
                    <span class="level-item">三月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/02/">
                <span class="level-start">
                    <span class="level-item">二月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/01/">
                <span class="level-start">
                    <span class="level-item">一月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2014/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2014</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">9</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2014/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2014</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
        
            <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                标签
            </h3>
            <ul class="menu-list">
                
                <li>
                    <a class="level is-marginless" href="/tags/net/">
                        <span class="level-start">
                            <span class="level-item">.net</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/5g/">
                        <span class="level-start">
                            <span class="level-item">5g</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/Docker/">
                        <span class="level-start">
                            <span class="level-item">Docker</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/Portainer/">
                        <span class="level-start">
                            <span class="level-item">Portainer</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/RocketMQ/">
                        <span class="level-start">
                            <span class="level-item">RocketMQ</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/android/">
                        <span class="level-start">
                            <span class="level-item">android</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/ansible/">
                        <span class="level-start">
                            <span class="level-item">ansible</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/blog/">
                        <span class="level-start">
                            <span class="level-item">blog</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/brew/">
                        <span class="level-start">
                            <span class="level-item">brew</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/cache/">
                        <span class="level-start">
                            <span class="level-item">cache</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/centos/">
                        <span class="level-start">
                            <span class="level-item">centos</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/coap/">
                        <span class="level-start">
                            <span class="level-item">coap</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/devops/">
                        <span class="level-start">
                            <span class="level-item">devops</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/docker/">
                        <span class="level-start">
                            <span class="level-item">docker</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">9</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/etl/">
                        <span class="level-start">
                            <span class="level-item">etl</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/fastdfs/">
                        <span class="level-start">
                            <span class="level-item">fastdfs</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">4</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/frp/">
                        <span class="level-start">
                            <span class="level-item">frp</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/git/">
                        <span class="level-start">
                            <span class="level-item">git</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">2</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/github/">
                        <span class="level-start">
                            <span class="level-item">github</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">2</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/gitolite/">
                        <span class="level-start">
                            <span class="level-item">gitolite</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/golang/">
                        <span class="level-start">
                            <span class="level-item">golang</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/gzip/">
                        <span class="level-start">
                            <span class="level-item">gzip</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/harbor/">
                        <span class="level-start">
                            <span class="level-item">harbor</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/hexo/">
                        <span class="level-start">
                            <span class="level-item">hexo</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">3</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/https/">
                        <span class="level-start">
                            <span class="level-item">https</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/hugo/">
                        <span class="level-start">
                            <span class="level-item">hugo</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/ikvm/">
                        <span class="level-start">
                            <span class="level-item">ikvm</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/java/">
                        <span class="level-start">
                            <span class="level-item">java</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/jenkins/">
                        <span class="level-start">
                            <span class="level-item">jenkins</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">4</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/keepass/">
                        <span class="level-start">
                            <span class="level-item">keepass</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/keettle/">
                        <span class="level-start">
                            <span class="level-item">keettle</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/kettle/">
                        <span class="level-start">
                            <span class="level-item">kettle</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/kong/">
                        <span class="level-start">
                            <span class="level-item">kong</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/letsencrypt/">
                        <span class="level-start">
                            <span class="level-item">letsencrypt</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">2</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/magick/">
                        <span class="level-start">
                            <span class="level-item">magick</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/memcacheq/">
                        <span class="level-start">
                            <span class="level-item">memcacheq</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/minikube/">
                        <span class="level-start">
                            <span class="level-item">minikube</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/mysql/">
                        <span class="level-start">
                            <span class="level-item">mysql</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/nginx/">
                        <span class="level-start">
                            <span class="level-item">nginx</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">3</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/nsq/">
                        <span class="level-start">
                            <span class="level-item">nsq</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/openwrt/">
                        <span class="level-start">
                            <span class="level-item">openwrt</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/pdf/">
                        <span class="level-start">
                            <span class="level-item">pdf</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/petl/">
                        <span class="level-start">
                            <span class="level-item">petl</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/php/">
                        <span class="level-start">
                            <span class="level-item">php</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">4</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/python/">
                        <span class="level-start">
                            <span class="level-item">python</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">5</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/saltstack/">
                        <span class="level-start">
                            <span class="level-item">saltstack</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">8</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/smarty/">
                        <span class="level-start">
                            <span class="level-item">smarty</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/snowflake/">
                        <span class="level-start">
                            <span class="level-item">snowflake</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/socket/">
                        <span class="level-start">
                            <span class="level-item">socket</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/solr/">
                        <span class="level-start">
                            <span class="level-item">solr</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">7</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/sqlserver/">
                        <span class="level-start">
                            <span class="level-item">sqlserver</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/sublime/">
                        <span class="level-start">
                            <span class="level-item">sublime</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/tesseract-ocr/">
                        <span class="level-start">
                            <span class="level-item">tesseract-ocr</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/thrift/">
                        <span class="level-start">
                            <span class="level-item">thrift</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/tmux/">
                        <span class="level-start">
                            <span class="level-item">tmux</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/ubuntu/">
                        <span class="level-start">
                            <span class="level-item">ubuntu</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/vagrant/">
                        <span class="level-start">
                            <span class="level-item">vagrant</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/zabbix/">
                        <span class="level-start">
                            <span class="level-item">zabbix</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">2</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/分布式/">
                        <span class="level-start">
                            <span class="level-item">分布式</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/摇号/">
                        <span class="level-start">
                            <span class="level-item">摇号</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/词库/">
                        <span class="level-start">
                            <span class="level-item">词库</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>
        
        </div>
    
</div>

                




<div class="column is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only has-order-3 column-right ">
    
        
<div class="card widget">
    <div class="card-content">
        <h3 class="menu-label">
            最新文章
        </h3>
        
        <article class="media">
            
            <a href="/tcp连接数/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/static/default.jpg" alt="tcp连接数">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-01-10T02:36:34.000Z">2020-01-10</time></div>
                    <a href="/tcp连接数/" class="has-link-black-ter is-size-6">tcp连接数</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/./dev/">dev</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/dev/jenkins-deploy-question-md/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/static/default.jpg" alt="jenkins 配置说明">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2020-01-03T05:42:31.000Z">2020-01-03</time></div>
                    <a href="/dev/jenkins-deploy-question-md/" class="has-link-black-ter is-size-6">jenkins 配置说明</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/./dev/">dev</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/dev/生成分布式id-md/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/static/default.jpg" alt="生成分布式id">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-12-20T12:36:34.000Z">2019-12-20</time></div>
                    <a href="/dev/生成分布式id-md/" class="has-link-black-ter is-size-6">生成分布式id</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/./dev/">dev</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/dev/docker-sysctl/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="/static/default.jpg" alt="docker_sysctl">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-12-12T02:54:47.000Z">2019-12-12</time></div>
                    <a href="/dev/docker-sysctl/" class="has-link-black-ter is-size-6">docker_sysctl</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/./dev/">dev</a>
                    </p>
                </div>
            </div>
        </article>
        
        <article class="media">
            
            <a href="/dev/rocketmq/" class="media-left">
                <p class="image is-64x64">
                    <img class="thumbnail" src="https://raw.githubusercontent.com/xxiu/img/asset/img/20191129160333.png" alt="RocketMQ小记">
                </p>
            </a>
            
            <div class="media-content">
                <div class="content">
                    <div><time class="has-text-grey is-size-7 is-uppercase" datetime="2019-12-06T15:16:35.000Z">2019-12-06</time></div>
                    <a href="/dev/rocketmq/" class="has-link-black-ter is-size-6">RocketMQ小记</a>
                    <p class="is-size-7 is-uppercase">
                        <a class="has-link-grey -link" href="/./dev/">dev</a>
                    </p>
                </div>
            </div>
        </article>
        
    </div>
</div>

    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
        <h3 class="menu-label">
            归档
        </h3>
        <ul class="menu-list">
        
        <li>
            <a class="level is-marginless" href="/archives/2020/01/">
                <span class="level-start">
                    <span class="level-item">一月 2020</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/07/">
                <span class="level-start">
                    <span class="level-item">七月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/06/">
                <span class="level-start">
                    <span class="level-item">六月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/05/">
                <span class="level-start">
                    <span class="level-item">五月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/04/">
                <span class="level-start">
                    <span class="level-item">四月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/03/">
                <span class="level-start">
                    <span class="level-item">三月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2019/01/">
                <span class="level-start">
                    <span class="level-item">一月 2019</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">5</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">6</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2018/10/">
                <span class="level-start">
                    <span class="level-item">十月 2018</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/09/">
                <span class="level-start">
                    <span class="level-item">九月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/03/">
                <span class="level-start">
                    <span class="level-item">三月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2017/01/">
                <span class="level-start">
                    <span class="level-item">一月 2017</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/07/">
                <span class="level-start">
                    <span class="level-item">七月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/06/">
                <span class="level-start">
                    <span class="level-item">六月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/04/">
                <span class="level-start">
                    <span class="level-item">四月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/03/">
                <span class="level-start">
                    <span class="level-item">三月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/02/">
                <span class="level-start">
                    <span class="level-item">二月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">2</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2016/01/">
                <span class="level-start">
                    <span class="level-item">一月 2016</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/08/">
                <span class="level-start">
                    <span class="level-item">八月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/07/">
                <span class="level-start">
                    <span class="level-item">七月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">11</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/05/">
                <span class="level-start">
                    <span class="level-item">五月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">3</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/04/">
                <span class="level-start">
                    <span class="level-item">四月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/03/">
                <span class="level-start">
                    <span class="level-item">三月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/02/">
                <span class="level-start">
                    <span class="level-item">二月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2015/01/">
                <span class="level-start">
                    <span class="level-item">一月 2015</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">1</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2014/12/">
                <span class="level-start">
                    <span class="level-item">十二月 2014</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">9</span>
                </span>
            </a>
        </li>
        
        <li>
            <a class="level is-marginless" href="/archives/2014/11/">
                <span class="level-start">
                    <span class="level-item">十一月 2014</span>
                </span>
                <span class="level-end">
                    <span class="level-item tag">7</span>
                </span>
            </a>
        </li>
        
        </ul>
        </div>
    </div>
</div>
    
        <div class="card widget">
    <div class="card-content">
        <div class="menu">
            <h3 class="menu-label">
                标签
            </h3>
            <ul class="menu-list">
                
                <li>
                    <a class="level is-marginless" href="/tags/net/">
                        <span class="level-start">
                            <span class="level-item">.net</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/5g/">
                        <span class="level-start">
                            <span class="level-item">5g</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/Docker/">
                        <span class="level-start">
                            <span class="level-item">Docker</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/Portainer/">
                        <span class="level-start">
                            <span class="level-item">Portainer</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/RocketMQ/">
                        <span class="level-start">
                            <span class="level-item">RocketMQ</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/android/">
                        <span class="level-start">
                            <span class="level-item">android</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/ansible/">
                        <span class="level-start">
                            <span class="level-item">ansible</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/blog/">
                        <span class="level-start">
                            <span class="level-item">blog</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/brew/">
                        <span class="level-start">
                            <span class="level-item">brew</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/cache/">
                        <span class="level-start">
                            <span class="level-item">cache</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/centos/">
                        <span class="level-start">
                            <span class="level-item">centos</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/coap/">
                        <span class="level-start">
                            <span class="level-item">coap</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/devops/">
                        <span class="level-start">
                            <span class="level-item">devops</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/docker/">
                        <span class="level-start">
                            <span class="level-item">docker</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">9</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/etl/">
                        <span class="level-start">
                            <span class="level-item">etl</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/fastdfs/">
                        <span class="level-start">
                            <span class="level-item">fastdfs</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">4</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/frp/">
                        <span class="level-start">
                            <span class="level-item">frp</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/git/">
                        <span class="level-start">
                            <span class="level-item">git</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">2</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/github/">
                        <span class="level-start">
                            <span class="level-item">github</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">2</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/gitolite/">
                        <span class="level-start">
                            <span class="level-item">gitolite</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/golang/">
                        <span class="level-start">
                            <span class="level-item">golang</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/gzip/">
                        <span class="level-start">
                            <span class="level-item">gzip</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/harbor/">
                        <span class="level-start">
                            <span class="level-item">harbor</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/hexo/">
                        <span class="level-start">
                            <span class="level-item">hexo</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">3</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/https/">
                        <span class="level-start">
                            <span class="level-item">https</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/hugo/">
                        <span class="level-start">
                            <span class="level-item">hugo</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/ikvm/">
                        <span class="level-start">
                            <span class="level-item">ikvm</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/java/">
                        <span class="level-start">
                            <span class="level-item">java</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/jenkins/">
                        <span class="level-start">
                            <span class="level-item">jenkins</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">4</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/keepass/">
                        <span class="level-start">
                            <span class="level-item">keepass</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/keettle/">
                        <span class="level-start">
                            <span class="level-item">keettle</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/kettle/">
                        <span class="level-start">
                            <span class="level-item">kettle</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/kong/">
                        <span class="level-start">
                            <span class="level-item">kong</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/letsencrypt/">
                        <span class="level-start">
                            <span class="level-item">letsencrypt</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">2</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/magick/">
                        <span class="level-start">
                            <span class="level-item">magick</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/memcacheq/">
                        <span class="level-start">
                            <span class="level-item">memcacheq</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/minikube/">
                        <span class="level-start">
                            <span class="level-item">minikube</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/mysql/">
                        <span class="level-start">
                            <span class="level-item">mysql</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/nginx/">
                        <span class="level-start">
                            <span class="level-item">nginx</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">3</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/nsq/">
                        <span class="level-start">
                            <span class="level-item">nsq</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/openwrt/">
                        <span class="level-start">
                            <span class="level-item">openwrt</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/pdf/">
                        <span class="level-start">
                            <span class="level-item">pdf</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/petl/">
                        <span class="level-start">
                            <span class="level-item">petl</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/php/">
                        <span class="level-start">
                            <span class="level-item">php</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">4</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/python/">
                        <span class="level-start">
                            <span class="level-item">python</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">5</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/saltstack/">
                        <span class="level-start">
                            <span class="level-item">saltstack</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">8</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/smarty/">
                        <span class="level-start">
                            <span class="level-item">smarty</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/snowflake/">
                        <span class="level-start">
                            <span class="level-item">snowflake</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/socket/">
                        <span class="level-start">
                            <span class="level-item">socket</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/solr/">
                        <span class="level-start">
                            <span class="level-item">solr</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">7</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/sqlserver/">
                        <span class="level-start">
                            <span class="level-item">sqlserver</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/sublime/">
                        <span class="level-start">
                            <span class="level-item">sublime</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/tesseract-ocr/">
                        <span class="level-start">
                            <span class="level-item">tesseract-ocr</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/thrift/">
                        <span class="level-start">
                            <span class="level-item">thrift</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/tmux/">
                        <span class="level-start">
                            <span class="level-item">tmux</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/ubuntu/">
                        <span class="level-start">
                            <span class="level-item">ubuntu</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/vagrant/">
                        <span class="level-start">
                            <span class="level-item">vagrant</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/zabbix/">
                        <span class="level-start">
                            <span class="level-item">zabbix</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">2</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/分布式/">
                        <span class="level-start">
                            <span class="level-item">分布式</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/摇号/">
                        <span class="level-start">
                            <span class="level-item">摇号</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
                <li>
                    <a class="level is-marginless" href="/tags/词库/">
                        <span class="level-start">
                            <span class="level-item">词库</span>
                        </span>
                        <span class="level-end">
                            <span class="level-item tag">1</span>
                        </span>
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>
    
    
</div>

            </div>
        </div>
    </section>
    <footer class="footer">
    <div class="container">
        <div class="level">
            <div class="level-start has-text-centered-mobile">
                <a class="footer-logo is-block has-mb-6" href="/">
                
                    <img src="/images/avatar.png" alt="张巍的烂笔头" height="28">
                
                </a>
                <p class="is-size-7">
                &copy; 2020 张巍的烂笔头&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a
                        href="http://github.com/ppoffice/hexo-theme-icarus">Icarus</a>
                </p>
            </div>
            <div class="level-end">
            
                <div class="field has-addons is-flex-center-mobile has-mt-5-mobile is-flex-wrap is-flex-middle">
                
                
                <p class="control">
                    <a class="button is-white " target="_blank" title="ICP备15045711号-1" href="http://beian.miit.gov.cn">
                        
                        ICP备15045711号-1
                        
                    </a>
                </p>
                
                </div>
            
            </div>
        </div>
    </div>
</footer>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script>
<script>moment.locale("zh-CN");</script>


    
    
    
    <script src="/js/animation.js"></script>
    

    
    
    
    <script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script>
    <script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script>
    <script src="/js/gallery.js" defer></script>
    

    
    

<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update
            my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="https://cdn.jsdelivr.net/npm/outdatedbrowser@1.1.5/outdatedbrowser/outdatedbrowser.min.js" defer></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        });
    });
</script>


    
    
<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/unpacked/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    MathJax.Hub.Config({
        'HTML-CSS': {matchFontHeight: false},
        SVG: {matchFontHeight: false},
        CommonHTML: {matchFontHeight: false}
    });
});
</script>

    
    

<a id="back-to-top" title="回到顶端" href="javascript:;">
    <i class="fas fa-chevron-up"></i>
</a>
<script src="/js/back-to-top.js" defer></script>


    
    

    
    
    
    

    
    
    
    
    
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script>
    <script src="/js/clipboard.js" defer></script>
    

    


<script src="/js/main.js" defer></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="想要查找什么..." />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '文章',
                PAGES: '页面',
                CATEGORIES: '分类',
                TAGS: '标签',
                UNTITLED: '(无标题)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js" defer></script>
<link rel="stylesheet" href="/css/search.css">
<link rel="stylesheet" href="/css/insight.css">
    
</body>
</html>